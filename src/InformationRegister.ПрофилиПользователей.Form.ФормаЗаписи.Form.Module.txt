
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	Если Не ПараметрыСеанса.РольСотрудника = Перечисления.РолиСотрудников.ПолныеПрава Тогда
		УстановитьПрофильПользователя(ПараметрыСеанса.ТекущийСотрудник);
	КонецЕсли;
КонецПроцедуры

&НаСервере
Процедура УстановитьПрофильПользователя(пПользователь = Неопределено)
	найтиЗапись = РегистрыСведений.ПрофилиПользователей.СоздатьМенеджерЗаписи();
	найтиЗапись.Сотрудник = пПользователь;
	найтиЗапись.Прочитать();
		
	Если НЕ найтиЗапись.Выбран() Тогда
		//найтиЗапись = РеквизитФормыВЗначение("Запись");
		найтиЗапись = РегистрыСведений.ПрофилиПользователей.СоздатьМенеджерЗаписи();
		найтиЗапись.Сотрудник = пПользователь;
	КонецЕсли;
		
	ЗначениеВРеквизитФормы(найтиЗапись, "Запись");
КонецПроцедуры // УстановитьПрофильПользователя()

&НаКлиенте
Процедура СотрудникПриИзменении(Элемент)
	УстановитьПрофильПользователя(Запись.Сотрудник);
КонецПроцедуры
