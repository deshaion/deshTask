
&НаКлиенте
Процедура ОбработкаКоманды(ПараметрКоманды, ПараметрыВыполненияКоманды)
	кодЗадачи = ПолучитьКодМантиса(ПараметрКоманды);
	Если кодЗадачи = Неопределено Тогда
		Возврат;
	КонецЕсли;
	ЗапуститьПриложение("http://itland-group.ru/mantis/view.php?id=" + Формат(кодЗадачи, "ЧГ=0"));
КонецПроцедуры

&НаСервере
Функция ПолучитьКодМантиса(пДело)
	Запрос = Новый Запрос;
	Запрос.Текст = "ВЫБРАТЬ
	|	МантисЗадачи.КодМантиса
	|ИЗ
	|	РегистрСведений.МантисЗадачи КАК МантисЗадачи
	|ГДЕ
	|	МантисЗадачи.Дело = &Дело";
	
	Запрос.УстановитьПараметр("Дело", пДело);
	
	Выборка = Запрос.Выполнить().Выбрать();
	
	Если Выборка.Следующий() Тогда
		Возврат Выборка.КодМантиса;
	Иначе
		Возврат Неопределено;
	КонецЕсли;
КонецФункции