
Процедура УстановкаПараметровСеанса(ТребуемыеПараметры)
	Запрос = Новый Запрос;
	Запрос.Текст = "ВЫБРАТЬ
	|	Сотрудники.Ссылка
	|ИЗ
	|	Справочник.Сотрудники КАК Сотрудники
	|ГДЕ
	|	Сотрудники.Наименование ПОДОБНО &Наименование";
	
	Запрос.УстановитьПараметр("Наименование", ИмяПользователя() + "%");
	
	Результат = Запрос.Выполнить();
	Выборка = Результат.Выбрать();
	
	текСотрудник = Неопределено;
	Если Выборка.Следующий() Тогда
		текСотрудник = Выборка.Ссылка;
	Иначе
		// Создадим нового сотрудника
		текСотрудник = Справочники.Сотрудники.СоздатьЭлемент();
		текСотрудник.Наименование = ИмяПользователя();
		текСотрудник.Записать();
		текСотрудник = текСотрудник.Ссылка;
	КонецЕсли;
	
	ПараметрыСеанса.ТекущийСотрудник = текСотрудник;
	
	Если РольДоступна("ПолныеПрава") Тогда
		ПараметрыСеанса.РольСотрудника = Перечисления.РолиСотрудников.ПолныеПрава;
	ИначеЕсли РольДоступна("ОпытныйРазработчик") Тогда
		ПараметрыСеанса.РольСотрудника = Перечисления.РолиСотрудников.ОпытныйРазработчик;
	ИначеЕсли РольДоступна("Разработчик") Тогда
		ПараметрыСеанса.РольСотрудника = Перечисления.РолиСотрудников.Разработчик;
	ИначеЕсли РольДоступна("Наблюдатель") Тогда
		ПараметрыСеанса.РольСотрудника = Перечисления.РолиСотрудников.Наблюдатель;
	Иначе
		ПараметрыСеанса.РольСотрудника = Перечисления.РолиСотрудников.Наблюдатель;
	КонецЕсли;
КонецПроцедуры
